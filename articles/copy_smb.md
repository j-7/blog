ゲームをコピーして学ぶ
====
ゲームプログラミングで大事なのは、そのプロセスであって、成果物ではない。<br>
そのプロセス自体を学ぶ最良の方法は、自分が好きで、プレイしたことがあり、<br>
手触りを記憶しているゲームをコピーすることだ。<br>

たった数時間の作業で、多くのことを学ぶことができる。

私が先日あるプログラミングワークショップで講師を務めたとき、<br>
コピーの手順が細分化されていて、手元に良いツールがあれば、<br>
コードにまともに触れたことがない人たちでも、<br>
たった5時間のペアプログラミングで、トップグループは、Menuの4-2まで到達した(3はスキップした)。

ただし、前日に約6時間の、[gitとenchant.jsの競技形式の特訓](http://blankblank.hatenablog.com/entry/2012/08/08/225818) が必要だった。<br>

5時間のうち、1時間以上はphotoshopとの格闘に費やされたが、<br>
それは作業の細分化が不足していたためだった。

この方法を使えば、公文式の教材のように、限られた時間内で、<br>
ある程度ゲームプログラミングのプロセスを知っている状態に持って行けるかもしれない。<bR>
(ただしゲーム制作自体が嫌いでないなら)

細分化の内容と、得られた反省点を記しておく。


NES版 Super Mario Bros.
====
誰もが知っている面白いゲームはいくつもあるが、私にとってはゼビウスとスーパーマリオだ。<br>
ただ、シューティングを好きな人は少ないので、題材はスーパーマリオを選んだ。<br>
しかし、熟練者ならすぐ気づくように、プラットフォームジャンプアクションゲームは、<br>
なんとなく動く状態から、気持ちよく動く状態にするのが極めて難しい!<br>
自分が書いたコードがなかなか気持ちよく動かない、その改善作業の体験も含めての学習を意図している。

[SMB最短プレイ動画](http://www.youtube.com/watch?v=PnPUVqI2GLQ)

講義では、gameboy microのプレイアブルを用意して、いつでも触れるようにしておいた。

講義の目的は、コピー商品を作るのではなく、ゲームプログラミングの学習である。<br>
また、講義では、作業の優先順位を示せる講師が確実に必要だ。<br>
この教材だけがあっても、学習効果は無いだろう。


 
Menu
====
<pre>￼1. 初期化 1-1. 画面を 横512 x 縦512 で初期化 1-2. 背景を水色にする 1-3. FPS=60にする2. マリオを歩かせる!
 2-1. 右向きのマリオを表示させる(静止) 以降scale=2 2-2. 右向きのマリオを表示させる(歩きアニメ) 2-3. 左右の矢印キーを押したとき左右に最大速度で動かす(画面端を越えていく) 2-4. マリオが画面の左端に来たら止まる 2-5. キーを押してもすぐに最大速度にならないように加速させる 2-6. キーを離してもすぐに最大速度にならないように減速させる 2-7. 右に走っているときに、左キーを押したら急減速させる 2-8. 急減速中はマリオの絵を反転させてブレーキアニメにする 2-9. 歩いている速度に比例したアニメ速度で表示する3. マリオをダッシュさせる! 3-1. Zキー(他でもOK)を押して左右をおすと急加速する(ダッシュという) 3-2. ダッシュ中は、最大速度も上がる4. 重力を働かせる! 4-1. マリオが、重力に引かれて落ちて画面下へ消え、二度と戻ってこないようにする 4-2. 画面の一番下で落ち止まる5. マリオをジャンプさせる! 5-1. 上矢印かスペースキーを押したらジャンプする（歩きの絵のまま） 5-2. ジャンプしたとき効果音を鳴らす 5-3. ジャンプ中はジャンプのアニメになるように修正する 5-4. マリオが、長く押すと高くジャンプする 5-5. マリオがジャンプ中でも、左右矢印キーで左右方向に移動できることを確認する6. クリボーを歩かせる! 6-1. onloadしたときクリボーを表示する(歩きアニメ) 6-2. クリボーがマリオの頭上に現れて落下し、画面下端に当たって止まる。 6-3. クリボーが登場後2秒でぺちゃんこになる 6-4. クリボーがぺちゃんこになったあと、1秒後に消える 6-5. クリボーが着地後、左に向かって歩く 6-6. クリボーが画面端に当たったら折り返す 6-7. クリボーがクリボーに当たったら折り返す 6-8. 画面のランダムな位置に5匹クリボーを出して上記が正しく動作するか見る7. マリオがクリボーを倒す! 7-1. マリオがクリボーに上から当たったとき、クリボーをぺちゃんこにする（踏む） 7-2. マリオがクリボーを踏んだら、上に少し跳ねさせる 7-3. マリオがクリボーを踏んだら、効果音を鳴らす8. マリオがクリボーにやられる! 8-1. マリオがクリボーに横から当たったら、死にアニメに変化させる（見た目だけ変更し、死んだ処理は入れない) 8-2. マリオが死にアニメに変化したあと、2秒後に元の歩きアニメに戻す9. 地形に乗る! 9-1. 16x16のMapを 16x16個ならべて、256x256を埋める。全部レンガにする 9-2. 最初の1画面分のマップをハードコードする 9-3. マリオが、地形よりも手前に表示されることを確認する 9-4. マリオが落ちるとき、画面下端ではなく、地形に当たって止まるように修正する (MapクラスのhitTest()) 9-5. マリオが、自分の足で地面に立っているように高さを調整する 9-6. クリボーも同じように足の位置で地形に当たって止まることを確認する 9-7. マリオがジャンプしたとき、上の壁に当たって止まるようにする．その際、拳で殴っているように見えるように高さを調整する。10. ブロックを叩く! 10-1. マリオが上の壁に当たったとき、Mapのブロックを消し、Spriteのブロックをその位置に出現させ、上に飛ばす。（上に消える） 10-2. 上の壁を叩いた、ボンという音を鳴らす 10-3. Spriteのブロックが上に飛ぶが、重力で落ちてくるようにする（下に消えるようになる） 10-4. 元の位置まで落ちてきたら消し、元のMapのブロックを復活させる。11. いいかんじのブロック! 11-1. マリオが、上の壁に飛び乗れることを確認する 11-2. マリオが左右に移動したとき、壁に当たって止まることを確認する（上の壁で試せる） 11-3. 壁からはみ出して立てることを確認する 11-4. 歩いている最中に落ちたら歩きアニメを停止させ、着地したら再開する 11-5. 地面に穴をあけてみる 11-6. 穴に落ちたら画面の一番上にワープさせて落ちてくるようにとりあえずしておく12. マップを右にスクロール! 12-1. 最初から6画面分ぐらいハードコードする 12-2. いま見ている場所を示す「カメラ」クラスを追加する。 メンバはxだけがあればよい 13-3. カメラのx,yを書き換えたら、見えている範囲が変化するように、Mapやキャラの描画時にカメラの座標を減算して表示する。 14-4. マリオが画面の真ん中より右に移動したら、同じ分だけカメラを右に動かす。 14-5. 当たり判定も正しく移動してることを確認 14-6. マリオが画面の左端を越えていかないことを確認する15. マリオが巨大化する! 15-1. onloadしたらすぐ、キノコを空中に登場させる 15-2. キノコが落ちて下端に当たったら左に動いていく。クリボーに当たったら引き返す。 15-3. マリオとキノコが重なったらマリオのscale=2にしてとりあえず大きくしてみる 15-4. 巨大化の効果音を鳴らす 15-5. scale=2を大きいマリオの絵にさしかえるように修正する。 15-6. 大きいマリオになってクリボーを踏み、違和感があったらキャラクタの大きさなどを調整する 15-7. 巨大化してるときのジャンプの低い効果音を鳴らす16. マリオが小さくなる! 16-1. 巨大化してる状態で敵に横から当たったら小さくする 16-2. 小さくするときのアニメーションを追加する 16-3. 小さくなる効果音を鳴らす17. ブロックを叩いて壊す! 17-1. 巨大化した状態でブロックに当たったらMapブロックを消す 17-2. ブロックを消したとき、壊れたブロックの絵を4つ飛ばす 17-3. ブロックを破壊した効果音を鳴らす18. しゃがむ! 18-1. しゃがんだら当たり判定が小さくなるようにする 19-2. しゃがみジャンプ19. ゲームを完成させていく….
 - ブロックを叩いてキノコを出す - 死んだときの演出 - GAME OVER - ステージクリアの旗 - お城に入る - 花火の演出 - スター - 1upキノコ - 背景の雲と山 - ?ブロックを配置 - コインを獲得する - ファイアフラワーを出す - ファイアマリオ、ファイアボール - ?ブロックのアニメーション - カメを追加 - カメの甲羅で他の敵を倒す - クリボーやカメが、しかるべき位置に来たら登場する - 豆の木 - TIMER - SCORE - COIN-1UP - もちろん、他のステージのデータ、 - もちろん、他の敵、シーソー、火の玉、など　など　など　など　など　など　など！
</pre>
 
TODO
====
 * 各段階で、photoshop操作の手順を細分化して追加する。
 * ダッシュを後に、地形判定を前に移動する
 * enchant.jsの最小コードをコピペしてcommitを最初に追加する

